---
description: タスク管理者への報告。タスク完了・ブロック時に `/report-task-manager 完了しました` で発動
allowed-tools: Bash(*/send-report.sh *)
---

# report-task-manager

タスク管理者にwork-queue (wq) 経由で報告を送信する。報告は `wq add` でSQLiteに書き込まれ、タスク管理者のStop hookが自動検知する。

## 手順

1. task_statusとmessageを決定（下記「推論ルール」参照）
2. `scripts/send-report.sh` を実行

```bash
~/.claude/skills/report-task-manager/scripts/send-report.sh <task_status> '<message>'
```

### task_status

- `done`: タスク完了
- `blocked`: ブロッカーあり、タスク管理者の判断が必要
- `wip`: 進捗報告（作業継続中）

### message に含めるべき情報

- **要点**: 何が完了した / 何にブロックされている
- **URL**: PR URL等があれば付与
- **次のアクション**: タスク管理者に判断を求める場合は明記
- **プロセス改善提案**: セッションで気づいた改善点（後述）

## プロセス改善提案

MUST: すべての報告にプロセス改善提案を含める。タスク完了・ブロック・WIP問わず必須。

セッション全体を振り返り、今後の作業効率を上げる具体的な改善案を提案する。

### 対象カテゴリ

- **スキル改善**: 使用したスキルの不足・改善点（例: github-prスキルにauto-approve機能が欲しい）
- **ワークフロー改善**: 手順の無駄・ボトルネック（例: レビュー→修正→再レビューのループが多い）
- **ツール・自動化**: 手動作業の自動化機会（例: CI失敗時の自動リトライ）
- **ナレッジ**: CLAUDE.mdやメモリに追記すべき知見（例: このリポジトリのテストはbun testで動く）

### ルール

- 1〜3件。無理に数を増やさない
- セッションの実体験に基づく具体的な提案のみ。一般論は不要
- 各提案は1行で、**何を** **どう改善するか** を明記

<example>
## 完了報告
IMM-2432 レビュー対応完了。PR: https://github.com/...

## プロセス改善提案
- github-prスキル: コメント単位のdiff表示がないため手動でファイルを探した。コメントのファイルパス+行番号から該当箇所を自動表示する機能を追加したい
- github-prスキル: 修正コミット後にセルフレビューを自動実行するオプションが欲しい
- ワークフロー: レビュー指摘の型エラー修正は定型的なのでCopilot的な自動修正候補を出せると速い
</example>

## 推論ルール

`$ARGUMENTS` が指定されている場合はその内容に従う。

`$ARGUMENTS` が空の場合は、セッションの会話コンテキストから自動推論する:

1. 直近の作業内容・実行結果・発生したエラーを分析
2. task_statusを判定:
   - 依頼されたタスクが完了している → `done`
   - 未解決のエラー・判断待ちがある → `blocked`
   - 作業途中で中間報告が必要 → `wip`
3. セッションを振り返り、プロセス改善提案を1〜3件抽出
4. messageを生成（要点・URL・次のアクション・プロセス改善提案を含める）
