# Neovim 設定ガイド

このドキュメントは `.config/nvim/init.lua` で設定されているプラグインとキーマッピングの使い方をまとめたものです。

## 基本設定

- **リーダーキー**: スペース
- **ローカルリーダー**: `\`
- タブ幅: 2スペース
- システムクリップボード連携: 有効

## 基本キーマッピング

| キー | モード | 動作 |
|------|--------|------|
| `jj` | Insert | ESCでノーマルモードへ |
| `<leader>r` | Normal | 設定を再読み込み |

## ファイル操作

### ファイルパスのコピー

| キー | モード | 動作 |
|------|--------|------|
| `<leader>cp` | Normal | 相対ファイルパスをコピー |
| `<leader>cpa` | Normal | 絶対ファイルパスをコピー |
| `<leader>cc` | Visual | ファイルパスと選択コードをフォーマット付きでコピー |
| `<leader>fo` | Normal | Finderでファイルを開く（選択状態で表示） |

コピー形式: `@path/to/file.txt` + コードブロック

### GitHub 連携

| キー | モード | 動作 |
|------|--------|------|
| `<leader>gh` | Normal | 現在のファイルをGitHubで開く（現在のコミット） |
| `<leader>gh` | Visual | 選択行をGitHubで開く（現在のコミット） |

## プラグイン

### Neo-tree（ファイルエクスプローラー）

**キーマッピング:**

| キー | 動作 |
|------|------|
| `<leader>e` | ファイルツリーを開く/閉じる |
| `<leader>o` | ファイルツリーにフォーカス |

**Neo-tree内の操作:**

| キー | 動作 |
|------|------|
| `Enter` | ファイルを開く / ディレクトリを展開 |
| `<` | 親ディレクトリへ移動 |
| `.` | ルートディレクトリを変更 |
| `a` | ファイル/ディレクトリを作成 |
| `d` | 削除 |
| `r` | リネーム |
| `y` | パスをコピー |
| `x` | カット |
| `p` | ペースト |
| `R` | リフレッシュ |
| `?` | ヘルプ表示 |

### Telescope（ファジーファインダー）

**キーマッピング:**

| キー | 動作 |
|------|------|
| `<leader>ff` | ファイル検索（隠しファイル含む、gitignoreも検索対象） |
| `<leader>fg` | テキスト検索（live grep） |
| `<leader>fb` | バッファ一覧 |

**Telescope内の操作:**

- `Ctrl+j/k` または `↓/↑`: 候補移動
- `Enter`: 選択
- `Ctrl+c` または `Esc`: キャンセル
- `Ctrl+u/d`: プレビューのスクロール

### LazyGit（Git統合）

**キーマッピング:**

| キー | 動作 |
|------|------|
| `<leader>gs` | LazyGitを開く |

**シェルエイリアス:**

```bash
nvg    # Neovimを起動してLazyGitを開く
```

**LazyGit内の基本操作:**

| キー | 動作 |
|------|------|
| `スペース` | ファイルをステージング/アンステージング |
| `a` | 全ファイルをステージング/アンステージング |
| `c` | コミット |
| `P` | プッシュ |
| `p` | プル |
| `enter` | ファイルの差分を表示 |
| `?` | ヘルプ表示 |
| `q` | 終了 |

詳細は LazyGit 内で `?` を押してヘルプを参照してください。

### LSP（Language Server Protocol）

**自動インストールされる言語サーバー:**
- TypeScript/JavaScript: ts_ls

**キーマッピング（LSP有効時のみ）:**

| キー | 動作 |
|------|------|
| `F12` | 定義へジャンプ |
| `Shift+F12` (`F24`) | 参照一覧を表示 |
| `K` | ホバー情報表示（型、ドキュメント） |
| `gi` | 実装へジャンプ |
| `Ctrl+k` | シグネチャヘルプ |
| `Ctrl+x Ctrl+o` | Insert modeで補完 |

## Tips

### よく使うワークフロー

**ファイル検索からジャンプ:**
```
<leader>ff → ファイル名入力 → Enter
```

**コードの一部を共有:**
```
Visual modeで選択 → <leader>cc → Claude Codeにペースト
```

**変更を確認してコミット:**
```
<leader>gs → LazyGitが開く → スペースでステージング → c でコミット
```

**GitHubで特定行を共有:**
```
Visual modeで行選択 → <leader>gh → ブラウザが開く
```

### Mason でLSPサーバーを管理

```vim
:Mason              " Masonを開く（LSPサーバーのインストール管理）
:LspInfo            " 現在のバッファで有効なLSP情報
```

## トラブルシューティング

### LSPが動かない場合

```vim
:LspInfo            " LSPの状態確認
:Mason              " 必要なサーバーがインストールされているか確認
```

### 設定が反映されない場合

```
<leader>r           " 設定を再読み込み
```

または Neovim を再起動
